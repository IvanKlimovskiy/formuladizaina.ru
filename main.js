(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{t:()=>U,X:()=>F});var t=document.querySelector(".nav-menu__burger-menu"),n=document.querySelector(".nav-menu-small__overlay"),r=document.querySelector(".nav-menu-small"),o=document.querySelector(".nav-menu-small__close-button"),i=document.querySelector(".popup_type_image"),a=document.querySelector(".popup__image"),c=document.querySelector(".popup_type_form"),s=Array.from(document.querySelectorAll(".button_type_popup")),l=Array.from(document.querySelectorAll(".popup__close-button")),u=Array.from(document.querySelectorAll(".popup")),d=document.querySelector(".popup__title"),m=document.querySelector(".messenger__button"),f=document.querySelector(".messenger__links"),p=document.querySelector("#overlay"),_=document.querySelector(".messenger"),y=Array.from(document.querySelectorAll(".messenger__link")),v=Array.from(document.querySelectorAll(".gallery__main-item")),g=document.querySelector(".our-production__slider-button_type_next"),h=document.querySelector(".our-production__slider-button_type_prev"),S=document.querySelector(".our-production__slider-wrapper"),b=document.querySelector(".our-production__slider-wrapper").childElementCount,L=document.querySelector(".popup__button-confirmation"),E=document.querySelector(".popup_type_send-form-confirmation"),q=document.querySelector(".popup__subtitle_type_send-form-confirmation"),A=Array.from(document.forms),k=Array.from(document.querySelectorAll("input[name=agreement]")),w=document.querySelector(".root"),C=Array.from(document.querySelectorAll(".nav-menu-small__item-link")),x=document.querySelector(".form_type_popup"),j=function(){w.classList.add("root_scroll_disabled"),w.style.paddingRight=U,_.style.paddingRight=U},O=function(){setTimeout((function(){w.classList.remove("root_scroll_disabled"),w.style.paddingRight="0",_.style.paddingRight="0"}),200)},T=function(e){return e.some((function(e){return!e.validity.valid}))},W=function(e,t,n){t.classList.remove(n.inputErrorClass),e.querySelector(".".concat(t.id,"-error")).textContent=""},X=function(e){var t=e.querySelector(".form__submit");t.classList.add("form__submit_disabled"),t.disabled=!0},B=function(e,t){t.target.closest(".form").disabled=!e};l.forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".popup");I(t)}))})),u.forEach((function(e){e.addEventListener("click",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("nav-menu-small__overlay"))&&I(e)}))}));var R=function(){O(),n.classList.remove("nav-menu-small__overlay_active"),r.classList.remove("nav-menu-small_active")},D=function(e){if("Escape"===e.key){var t=document.querySelector(".popup_opened");I(t)}},M=function(e){"Enter"===e.key&&document.querySelector(".popup__button-confirmation").click()},P=function(e){var t;e.classList.contains("popup_type_form")&&(t=Array.from(x.querySelectorAll(".form__input"))).forEach((function(e){T(t)&&W(x,e,F)})),e.classList.contains("popup_type_send-form-confirmation")&&window.addEventListener("keydown",M),e.classList.add("popup_opened"),j(),window.addEventListener("keydown",D)},I=function(e){e.classList.contains("popup_type_form")||x.reset(),e.classList.contains("popup_type_image")&&setTimeout((function(){a.src="",a.alt=""}),200),e.classList.remove("popup_opened"),O(),window.removeEventListener("keydown",D),e.classList.contains("popup_type_send-form-confirmation")&&(window.removeEventListener("keydown",M),O(),window.removeEventListener("keydown",D))};function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V,F={formElement:".form",inputElement:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_disabled",inputErrorClass:"form__input_type_error",errorClass:".form__input-error"},U=window.innerWidth-w.offsetWidth+"px",z=0,G=document.querySelector(".our-production__slider-image").offsetWidth;t.addEventListener("click",(function(){j(),n.classList.add("nav-menu-small__overlay_active"),r.classList.add("nav-menu-small_active")})),o.addEventListener("click",R),n.addEventListener("click",(function(e){e.target.classList.contains("nav-menu-small__overlay")&&R()})),s.forEach((function(e){e.addEventListener("click",(function(){d.textContent=e.textContent,P(c)}))})),y.forEach((function(e){e.addEventListener("click",(function(){f.classList.remove("messenger__links_active"),p.style.display="none"}))})),document.addEventListener("click",(function(e){"overlay"===e.target.id&&(f.classList.remove("messenger__links_active"),p.style.display="none"),e.target===m&&(f.classList.toggle("messenger__links_active"),p.style.display="block")})),v.forEach((function(e){e.addEventListener("click",(function(e){P(i),a.src=e.target.src,a.alt=e.target.alt}))})),g.addEventListener("click",(function(){g.disabled=!0,z+=G,S.style.transform="translateX(-".concat(z,"px)"),z===G*b&&(S.style.transform="translateX(0)",z=0),setTimeout((function(){g.disabled=!1}),1e3)})),h.addEventListener("click",(function(){h.disabled=!0,z-=G,S.style.transform="translateX(-".concat(z,"px)"),z===-G&&(S.style.transform="translateX(-".concat(G*(b-1),"px)"),z=G*(b-1)),setTimeout((function(){h.disabled=!1}),1e3)})),L.addEventListener("click",(function(){I(E)})),A.forEach((function(e){e.addEventListener("submit",(function(t){t.preventDefault(),B(!1,t);var n=new FormData(e);fetch("sendmail.php",{method:"POST",body:n}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка:".concat(e.status))})).then((function(e){q.textContent=e.message,I(c)})).catch((function(e){q.textContent=e.message,I(c)})).finally((function(){B(!0,t),setTimeout((function(){P(E)}),200)})),e.reset(),X(e)}))})),V=F,Array.from(document.querySelectorAll(V.formElement)).forEach((function(e){Array.from(e.querySelectorAll(V.inputElement)).forEach((function(t){!function(e,t,n){var r=Array.from(e.querySelectorAll(n.inputElement));t.addEventListener("input",(function(){!function(e,t,n,r){t.validity.patternMismatch?t.setCustomValidity(n):t.setCustomValidity(""),t.validity.valid?W(e,t,r):function(e,t,n,r){t.classList.add(r.inputErrorClass),e.querySelector(".".concat(t.id,"-error")).textContent=n}(e,t,t.validationMessage,r)}(e,t,t.dataset.errorMessage,n),function(e,t,n){var r=t.querySelector(n.submitButtonSelector),o=t.querySelector("input[name=agreement]");e||!o.checked?(r.classList.add(n.inactiveButtonClass),r.disabled=!0):(r.classList.remove(n.inactiveButtonClass),r.disabled=!1)}(T(r),e,n)}))}(e,t,V)}))})),k.forEach((function(e){e.addEventListener("change",(function(e){var t,n=e.target.closest(".form"),r=n.querySelector("input[name=agreement]");T(Array.from(n.querySelectorAll(".form__input")))||!r.checked?X(n):((t=n.querySelector(".form__submit")).classList.remove("form__submit_disabled"),t.disabled=!1)}))})),C.forEach((function(e){e.addEventListener("click",(function(){O(),n.classList.remove("nav-menu-small__overlay_active"),r.classList.remove("nav-menu-small_active")}))})),screen.orientation.addEventListener("change",(function(){U=window.innerWidth-w.offsetWidth+"px",G=document.querySelector(".our-production__slider-image").offsetWidth,S.style.transform="translateX(0)",z=0})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+7 (___) ___-__-__";function n(e){var n=e.keyCode,r=t,o=r.replace(/\D/g,""),i=this.value.replace(/\D/g,""),a=0,c=r.replace(/[_\d]/g,(function(e){return a<i.length?i.charAt(a++)||o.charAt(a):e}));-1!==(a=c.indexOf("_"))&&(c=c.slice(0,a));var s=r.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(s=new RegExp("^"+s+"$")).test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=c),"blur"===e.type&&this.value.length<5&&(this.value="")}var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(document.querySelectorAll(e));try{for(o.s();!(r=o.n()).done;){var i=r.value;i.addEventListener("input",n),i.addEventListener("focus",n),i.addEventListener("blur",n)}}catch(e){o.e(e)}finally{o.f()}}('input[name="number"]')})();