(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{X:()=>F});var t=document.querySelector(".nav-menu__burger-menu"),n=document.querySelector(".nav-menu-small__overlay"),r=document.querySelector(".nav-menu-small"),o=document.querySelector(".nav-menu-small__close-button"),a=document.querySelector(".popup_type_image"),i=document.querySelector(".popup__image"),c=document.querySelector(".popup_type_form"),l=Array.from(document.querySelectorAll(".button_type_popup")),u=Array.from(document.querySelectorAll(".popup__close-button")),s=Array.from(document.querySelectorAll(".popup")),d=document.querySelector(".popup__title"),m=document.querySelector(".messenger__button"),f=document.querySelector(".messenger__links"),p=document.querySelector("#overlay"),_=document.querySelector(".messenger"),y=Array.from(document.querySelectorAll(".messenger__link")),v=Array.from(document.querySelectorAll(".gallery__main-item")),g=document.querySelector(".our-production__slider-button_type_next"),h=document.querySelector(".our-production__slider-button_type_prev"),b=document.querySelector(".our-production__slider-wrapper"),S=document.querySelector(".our-production__slider-image").offsetWidth,E=document.querySelector(".our-production__slider-wrapper").childElementCount,L=document.querySelector(".popup__button-confirmation"),q=document.querySelector(".popup_type_send-form-confirmation"),A=document.querySelector(".popup__subtitle_type_send-form-confirmation"),k=Array.from(document.forms),w=Array.from(document.querySelectorAll("input[name=agreement]")),C=document.querySelector(".root"),x=window.innerWidth-C.offsetWidth+"px",j=Array.from(document.querySelectorAll(".nav-menu-small__item-link")),O=document.querySelector(".form_type_popup"),B=function(){C.classList.add("root_scroll_disabled"),C.style.paddingRight=x,_.style.paddingRight=x},R=function(){setTimeout((function(){C.classList.remove("root_scroll_disabled"),C.style.paddingRight="0",_.style.paddingRight="0"}),200)},T=function(e){return e.some((function(e){return!e.validity.valid}))},X=function(e,t,n){t.classList.remove(n.inputErrorClass),e.querySelector(".".concat(t.id,"-error")).textContent=""},D=function(e){var t=e.querySelector(".form__submit");t.classList.add("form__submit_disabled"),t.disabled=!0},M=function(e,t){t.target.closest(".form").disabled=!e};u.forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".popup");$(t)}))})),s.forEach((function(e){e.addEventListener("click",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("nav-menu-small__overlay"))&&$(e)}))}));var P=function(){R(),n.classList.remove("nav-menu-small__overlay_active"),r.classList.remove("nav-menu-small_active")},I=function(e){if("Escape"===e.key){var t=document.querySelector(".popup_opened");$(t)}},W=function(e){var t;(t=Array.from(O.querySelectorAll(".form__input"))).forEach((function(e){T(t)&&X(O,e,F)})),e.classList.add("popup_opened"),B(),window.addEventListener("keydown",I)},$=function(e){e.classList.remove("popup_opened"),R(),window.removeEventListener("keydown",I),O.reset(),e.classList.contains("popup_type_image")&&(i.src="",i.alt="")};function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F={formElement:".form",inputElement:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_disabled",inputErrorClass:"form__input_type_error",errorClass:".form__input-error"};t.addEventListener("click",(function(){B(),n.classList.add("nav-menu-small__overlay_active"),r.classList.add("nav-menu-small_active")})),o.addEventListener("click",P),n.addEventListener("click",(function(e){e.target.classList.contains("nav-menu-small__overlay")&&P()})),l.forEach((function(e){e.addEventListener("click",(function(){d.textContent=e.textContent,W(c)}))})),y.forEach((function(e){e.addEventListener("click",(function(){f.classList.remove("messenger__links_active"),p.style.display="none"}))})),document.addEventListener("click",(function(e){"overlay"===e.target.id&&(f.classList.remove("messenger__links_active"),p.style.display="none"),e.target===m&&(f.classList.toggle("messenger__links_active"),p.style.display="block")})),v.forEach((function(e){e.addEventListener("click",(function(e){W(a),i.src=e.target.src,i.alt=e.target.alt}))}));var U,z=0;g.addEventListener("click",(function(){g.disabled=!0,z+=S,b.style.transform="translateX(-".concat(z,"px)"),z===S*E&&(b.style.transform="translateX(0)",z=0),setTimeout((function(){g.disabled=!1}),1e3)})),h.addEventListener("click",(function(){h.disabled=!0,z-=S,b.style.transform="translateX(-".concat(z,"px)"),z===-S&&(b.style.transform="translateX(-".concat(S*(E-1),"px)"),z=S*(E-1)),setTimeout((function(){h.disabled=!1}),1e3)})),L.addEventListener("click",(function(){$(q)})),k.forEach((function(e){e.addEventListener("submit",(function(t){t.preventDefault(),M(!1,t);var n=new FormData(e);fetch("sendmail.php",{method:"POST",body:n}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка:".concat(e.status))})).then((function(e){W(q),A.textContent=e.message})).catch((function(e){A.textContent=e.message})).finally((function(){M(!0,t),$(c)})),e.reset(),D(e)}))})),U=F,Array.from(document.querySelectorAll(U.formElement)).forEach((function(e){Array.from(e.querySelectorAll(U.inputElement)).forEach((function(t){!function(e,t,n){var r=Array.from(e.querySelectorAll(n.inputElement));t.addEventListener("input",(function(){!function(e,t,n,r){t.validity.patternMismatch?t.setCustomValidity(n):t.setCustomValidity(""),t.validity.valid?X(e,t,r):function(e,t,n,r){t.classList.add(r.inputErrorClass),e.querySelector(".".concat(t.id,"-error")).textContent=n}(e,t,t.validationMessage,r)}(e,t,t.dataset.errorMessage,n),function(e,t,n){var r=t.querySelector(n.submitButtonSelector),o=t.querySelector("input[name=agreement]");e||!o.checked?(r.classList.add(n.inactiveButtonClass),r.disabled=!0):(r.classList.remove(n.inactiveButtonClass),r.disabled=!1)}(T(r),e,n)}))}(e,t,U)}))})),w.forEach((function(e){e.addEventListener("change",(function(e){var t,n=e.target.closest(".form"),r=n.querySelector("input[name=agreement]");T(Array.from(n.querySelectorAll(".form__input")))||!r.checked?D(n):((t=n.querySelector(".form__submit")).classList.remove("form__submit_disabled"),t.disabled=!1)}))})),j.forEach((function(e){e.addEventListener("click",(function(){R(),n.classList.remove("nav-menu-small__overlay_active"),r.classList.remove("nav-menu-small_active")}))})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+7 (___) ___-__-__";function n(e){var n=e.keyCode,r=t,o=r.replace(/\D/g,""),a=this.value.replace(/\D/g,""),i=0,c=r.replace(/[_\d]/g,(function(e){return i<a.length?a.charAt(i++)||o.charAt(i):e}));-1!==(i=c.indexOf("_"))&&(c=c.slice(0,i));var l=r.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(l=new RegExp("^"+l+"$")).test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=c),"blur"===e.type&&this.value.length<5&&(this.value="")}var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(document.querySelectorAll(e));try{for(o.s();!(r=o.n()).done;){var a=r.value;a.addEventListener("input",n),a.addEventListener("focus",n),a.addEventListener("blur",n)}}catch(e){o.e(e)}finally{o.f()}}('input[name="number"]')})();