(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{t:()=>K,X:()=>J});var t=document.querySelector(".nav-menu__burger-menu"),n=document.querySelector(".nav-menu-small__overlay"),r=document.querySelector(".nav-menu-small"),o=document.querySelector(".nav-menu"),i=document.querySelector(".nav-menu-small__close-button"),c=document.querySelector(".button-to-top"),a=document.querySelector(".tinkoff-banner__close-button"),l=document.querySelector(".tinkoff-banner"),s=document.querySelector(".tinkoff-banner__button"),u=document.querySelector(".popup_type_image"),d=document.querySelector(".popup__image"),m=document.querySelector(".popup_type_form"),f=document.querySelector(".popup_type_tinkoff-banner"),p=Array.from(document.querySelectorAll(".button_type_popup")),y=Array.from(document.querySelectorAll(".popup__close-button")),_=Array.from(document.querySelectorAll(".popup")),v=document.querySelector(".popup__title"),g=document.querySelector(".messenger__button"),h=document.querySelector(".messenger__links"),b=document.querySelector("#overlay"),S=document.querySelector(".messenger"),L=Array.from(document.querySelectorAll(".messenger__link")),E=Array.from(document.querySelectorAll(".gallery__main-item")),q=document.querySelector(".our-production__slider-button_type_next"),w=document.querySelector(".our-production__slider-button_type_prev"),k=document.querySelector(".our-production__slider-wrapper"),A=document.querySelector(".our-production__slider-wrapper").childElementCount,x=document.querySelector(".popup__button-confirmation"),C=document.querySelector(".popup_type_send-form-confirmation"),W=document.querySelector(".popup__subtitle_type_send-form-confirmation"),T=Array.from(document.forms),j=Array.from(document.querySelectorAll("input[name=agreement]")),O=document.querySelector(".root"),R=Array.from(document.querySelectorAll(".nav-menu-small__item-link")),X=document.querySelector(".form_type_popup"),B=function(){O.classList.add("root_scroll_disabled"),O.style.paddingRight=K,l.style.marginRight=K,l.style.width="calc(100% - ".concat(K,")"),S.style.paddingRight=K},D=function(){setTimeout((function(){O.classList.remove("root_scroll_disabled"),O.style.paddingRight="0",l.style.width="100%",S.style.paddingRight="0"}),200)},M=function(e){return e.some((function(e){return!e.validity.valid}))},P=function(e,t,n){t.classList.remove(n.inputErrorClass),e.querySelector(".".concat(t.id,"-error")).textContent=""},I=function(e){var t=e.querySelector(".form__submit");t.classList.add("form__submit_disabled"),t.disabled=!0},$=function(e,t){t.target.closest(".form").disabled=!e};y.forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".popup");z(t)}))})),_.forEach((function(e){e.addEventListener("click",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("nav-menu-small__overlay"))&&z(e)}))}));var V=function(){D(),n.classList.remove("nav-menu-small__overlay_active"),r.classList.remove("nav-menu-small_active")},F=function(e){if("Escape"===e.key){var t=document.querySelector(".popup_opened");z(t)}},U=function(e){"Enter"===e.key&&document.querySelector(".popup__button-confirmation").click()},Y=function(e){var t;e.classList.contains("popup_type_form")&&(t=Array.from(X.querySelectorAll(".form__input"))).forEach((function(e){M(t)&&P(X,e,J)})),e.classList.contains("popup_type_send-form-confirmation")&&window.addEventListener("keydown",U),e.classList.add("popup_opened"),B(),window.addEventListener("keydown",F)},z=function(e){e.classList.contains("popup_type_form")||X.reset(),e.classList.contains("popup_type_image")&&setTimeout((function(){d.src="",d.alt=""}),200),e.classList.remove("popup_opened"),D(),window.removeEventListener("keydown",F),e.classList.contains("popup_type_send-form-confirmation")&&(window.removeEventListener("keydown",U),D(),window.removeEventListener("keydown",F))};function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H,J={formElement:".form",inputElement:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_disabled",inputErrorClass:"form__input_type_error",errorClass:".form__input-error"},K=window.innerWidth-O.offsetWidth+"px",N=0,Q=document.querySelector(".our-production__slider-image").offsetWidth;t.addEventListener("click",(function(){B(),n.classList.add("nav-menu-small__overlay_active"),r.classList.add("nav-menu-small_active")})),i.addEventListener("click",V),n.addEventListener("click",(function(e){e.target.classList.contains("nav-menu-small__overlay")&&V()})),p.forEach((function(e){e.addEventListener("click",(function(){v.textContent=e.textContent,Y(m)}))})),s.addEventListener("click",(function(){Y(f)})),L.forEach((function(e){e.addEventListener("click",(function(){h.classList.remove("messenger__links_active"),b.style.display="none"}))})),document.addEventListener("click",(function(e){"overlay"===e.target.id&&(h.classList.remove("messenger__links_active"),b.style.display="none"),e.target===g&&(h.classList.toggle("messenger__links_active"),b.style.display="block")})),E.forEach((function(e){e.addEventListener("click",(function(e){Y(u),d.src=e.target.src,d.alt=e.target.alt}))})),q.addEventListener("click",(function(){q.disabled=!0,N+=Q,k.style.transform="translateX(-".concat(N,"px)"),N===Q*A&&(k.style.transform="translateX(0)",N=0),setTimeout((function(){q.disabled=!1}),1e3)})),w.addEventListener("click",(function(){w.disabled=!0,N-=Q,k.style.transform="translateX(-".concat(N,"px)"),N===-Q&&(k.style.transform="translateX(-".concat(Q*(A-1),"px)"),N=Q*(A-1)),setTimeout((function(){w.disabled=!1}),1e3)})),x.addEventListener("click",(function(){z(C)})),T.forEach((function(e){e.addEventListener("submit",(function(t){t.preventDefault(),$(!1,t);var n=new FormData(e);fetch("sendmail.php",{method:"POST",body:n}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка:".concat(e.status))})).then((function(e){W.textContent=e.message,z(m)})).catch((function(e){W.textContent=e.message,z(m)})).finally((function(){$(!0,t),setTimeout((function(){Y(C)}),200)})),e.reset(),I(e)}))})),H=J,Array.from(document.querySelectorAll(H.formElement)).forEach((function(e){Array.from(e.querySelectorAll(H.inputElement)).forEach((function(t){!function(e,t,n){var r=Array.from(e.querySelectorAll(n.inputElement));t.addEventListener("input",(function(){!function(e,t,n,r){t.validity.patternMismatch?t.setCustomValidity(n):t.setCustomValidity(""),t.validity.valid?P(e,t,r):function(e,t,n,r){t.classList.add(r.inputErrorClass),e.querySelector(".".concat(t.id,"-error")).textContent=n}(e,t,t.validationMessage,r)}(e,t,t.dataset.errorMessage,n),function(e,t,n){var r=t.querySelector(n.submitButtonSelector),o=t.querySelector("input[name=agreement]");e||!o.checked?(r.classList.add(n.inactiveButtonClass),r.disabled=!0):(r.classList.remove(n.inactiveButtonClass),r.disabled=!1)}(M(r),e,n)}))}(e,t,H)}))})),j.forEach((function(e){e.addEventListener("change",(function(e){var t,n=e.target.closest(".form"),r=n.querySelector("input[name=agreement]");M(Array.from(n.querySelectorAll(".form__input")))||!r.checked?I(n):((t=n.querySelector(".form__submit")).classList.remove("form__submit_disabled"),t.disabled=!1)}))})),R.forEach((function(e){e.addEventListener("click",(function(){D(),n.classList.remove("nav-menu-small__overlay_active"),r.classList.remove("nav-menu-small_active")}))})),screen.orientation.addEventListener("change",(function(){K=window.innerWidth-O.offsetWidth+"px",Q=document.querySelector(".our-production__slider-image").offsetWidth,k.style.transform="translateX(0)",N=0})),window.addEventListener("scroll",(function(){window.scrollY>=2e3?c.style.display="flex":c.style.display="none"})),c.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})})),a.addEventListener("click",(function(){l.style.display="none",window.innerWidth>529?o.style.padding="60px 15px 15px":window.innerWidth<=529&&window.innerWidth>380?o.style.padding="90px 15px 15px":o.style.padding="60px 15px 15px"})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+7 (___) ___-__-__";function n(e){var n=e.keyCode,r=t,o=r.replace(/\D/g,""),i=this.value.replace(/\D/g,""),c=0,a=r.replace(/[_\d]/g,(function(e){return c<i.length?i.charAt(c++)||o.charAt(c):e}));-1!==(c=a.indexOf("_"))&&(a=a.slice(0,c));var l=r.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(l=new RegExp("^"+l+"$")).test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=a),"blur"===e.type&&this.value.length<5&&(this.value="")}var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){a=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw i}}}}(document.querySelectorAll(e));try{for(o.s();!(r=o.n()).done;){var i=r.value;i.addEventListener("input",n),i.addEventListener("focus",n),i.addEventListener("blur",n)}}catch(e){o.e(e)}finally{o.f()}}('input[name="number"]')})();